# Serialization 

*Сериализация* - процедура преобразования в последовательность байт.

Для того, чтобы объект мог быть сериализован, класс, от которого он порожден, должен реализовывать интерфейс `java.io.Serializable`. В этом интерфейсе не определен ни один метод. Он нужен лишь для указания, что объекты класса могут участвовать в сериализации. При попытке сериализовать объект, не имеющий такого интерфейса, будет брошен `java.io.NotSerializableException`.

Чтобы начать сериализацию объекта, нужен выходной поток `OutputStream`, в который и будет записываться сгенерированная последовательность байт. Этот поток передается в конструктор `ObjectOutputStream`. Затем вызовом метода `writeObject()` объект сериализуется и записывается в выходной поток.


### Алгоритм сериализации Java

+ запись метаданных о классе ассоциированном с объектом
+ рекурсивная запись описания суперклассов, до тех пор пока не будет достигнут java.lang.object
+ после окончания записи метаданных начинается запись фактических данных ассоциированных с экземпляром, только в этот раз начинается запись с самого верхнего суперкласса
+ рекурсивная запись данных ассоциированных с экземпляром начиная с самого низшего суперкласса

### Исключения 

+ ClassNotFoundException
 `TestClass` был сериализован и передан по сети на другую машину для восстановления. Может случиться так, что у считывающей JVM на локальном диске не окажется описания этого класса (файл `TestClass.class` ). Поскольку стандартный механизм сериализации записывает в поток байт лишь состояние объекта, для успешной десериализации необходимо наличие описание класса. 
 
 
+ StreamCorruptedException
 Неправильный формат входного потока
 

+ OptionalDataException
`ObjectOutputStream` может быть использован для последовательной записи нескольких значений как объектных, так и примитивных типов в произвольной последовательности. Если при считывании будет вызван метод `readObject`, а в исходном потоке следующим на очереди записано значение примитивного типа, будет брошено исключение `java.io.OptionalDataException`

