# ArrayList

![Image](https://habrastorage.org/storage1/8ce732f8/e6d46bea/e258a346/4f7e5f56.png)

*ArrayList — реализует интерфейс List. Как известно, в Java массивы имеют фиксированную длину, и после того как массив создан, он не может расти или уменьшаться. ArrayList может менять свой размер во время исполнения программы, при этом не обязательно указывать размерность при создании объекта. Элементы ArrayList могут быть абсолютно любых типов в том числе и null.*



### Создание объекта

`ArrayList<String> list = new ArrayList<String>();
`
Объект `list` содержит свойства:

+ elementData (массив определенного типа указанного в generic)
+ size (по умолчанию будет создан массив из 10-ти элементов типа Object)

Используя `ArrayList(capacity)`


### Добавление элементов
`list.add("0");`

Как работает:

1. проверяется, достаточно ли места в массиве для вставки нового элемента;
2. добавляется элемент в конец (согласно значению size) массива.

 Если места в массиве не достаточно, новая емкость рассчитывается по формуле **(oldCapacity * 3) / 2 + 1**. Второй момент это копирование элементов. Оно осуществляется с помощью native метода `System.arraycopy()`, который написан не на Java.


### Добавление в «середину» списка

`list.add(5, "100");`

Происходит в три этапа:
1. проверяется, достаточно ли места в массиве для вставки нового элемента;
2. подготавливается место для нового элемента с помощью `System.arraycopy()`;
3. перезаписывается значение у элемента с указанным индексом.

В случаях, когда в исходный список необходимо добавить другую коллекцию, да еще и в «середину», стоит использовать метод` addAll(index, Collection)`. И хотя, данный метод скорее всего вызовет `System.arraycopy()` три раза, в итоге это будет гораздо быстрее поэлементного добавления.


### Удаление элементов

Удалять элементы можно двумя способами:
— по индексу remove(index)
— по значению remove(value)

С удалением элемента по индексу всё просто:

`list.remove(5);`

Алгоритм: 

1. Сначала определяется какое количество элементов надо скопировать

2. затем копируем элементы используя `System.arraycopy()`
3. уменьшаем размер массива и забываем про последний элемент

При удалении по значению, в цикле просматриваются все элементы списка, до тех пор пока не будет найдено соответствие. Удален будет лишь первый найденный элемент.

***Важно***
При удалении элементов текущая величина capacity не уменьшается, что может привести к своеобразным утечкам памяти. Поэтому не стоит пренебрегать методом `trimToSize()`.



### Итоги
+ Быстрый доступ к элементам по индексу за время O(1);
+ Доступ к элементам по значению за линейное время O(n);
+ Медленный, когда вставляются и удаляются элементы из «середины» списка;
+ Позволяет хранить любые значения в том числе и null;
+ Не синхронизирован.


### Ссылки
[original page](https://habrahabr.ru/post/128269/)